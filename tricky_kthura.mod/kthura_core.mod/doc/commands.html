<html><head><title>Module tricky_kthura.kthura_core reference</title>
<link rel=stylesheet Type=text/css href='../../../../doc/bmxstyle.css'>
</head><body>
<table width=100% cellspacing=0><tr align=center><td class=small>&nbsp;</td>
<td class=small width=1%><b>tricky_kthura.kthura_core:</b></td>
<td class=small width=1%><a href=#globals class=small>Globals</a></td>
<td class=small width=1%><a href=#functions class=small>Functions</a></td>
<td class=small width=1%><a href=#types class=small>Types</a></td>
<td class=small width=1%><a href=#modinfo class=small>Modinfo</a></td>
<td class=small width=1%><a href='../../../../mod/tricky_kthura.mod/kthura_core.mod/kthura_core.bmx' class=small>Source</a></td>
<td class=small>&nbsp;</td></tr></table>
<h1>Module tricky_kthura.kthura_core</h1>
<p align='center' style='background-color:#000000; color:#aa00ff'><img src='Kthura_Logo_Full.png'></p>
<p>
<p align='center' style='background-color:#ff0000; color:#ffff00'>NOTICE!!!<br>This module is still in development so many features will not work properly. Or most likely not at all.<br>I recommend not to use this module until this notice has been removed</p>
<p>
<p>This module is written in order to load Kthura maps into BlitzMax. The Kthura system was named after the main protagonist of the adventure game M&ouml;rker as that was the first game to use this system.
<h2><a name=globals></a>Globals Summary</h2><table class=doc width=100%><tr><td colspan=2>
<a href=#Kthura_SetCam>Kthura_SetCam</a>
, 
<a href=#KthuraError>KthuraError</a>
, 
<a href=#KthuraWarning>KthuraWarning</a>
</td></tr>
</table>
<h2><a name=functions></a>Functions Summary</h2><table class=doc width=100%>
<tr><td class=docleft width=1%><a href=#LoadKthura>LoadKthura</a></td><td class=docright>
Load Kthura map.
</td></tr>
</table>
<h2><a name=types></a>Types Summary</h2><table class=doc width=100%>
<tr><td class=docleft width=1%><a href=#TKthura>TKthura</a></td><td class=docright>
This type is used to store a level set up in Kthura.
</td></tr>
<tr><td class=docleft width=1%><a href=#TKthuraActor>TKthuraActor</a></td><td class=docright>
This type is used for actors in a Kthura Map. It's an extended TKthuraObject as actors have some additional data which you won't need in the other objects.
</td></tr>
<tr><td class=docleft width=1%><a href=#TKthuraObject>TKthuraObject</a></td><td class=docright>
This type contains data of an object within a Kthura map.
</td></tr>
</table>
<h2
 id=globalsdet>Globals
</h2>
<table class=doc width=100% cellspacing=3 id=Kthura_SetCam>
<tr><td class=doctop colspan=2>Global Kthura_SetCam(X,Y)</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>This function can be used to allow the Kthura loader to define the camera by the map settings in the map file. Just replace it with your own function to make this happen.</td></tr>
<tr><td class=docleft width=1%>Information</td><td class=docright>This function is only meant for editors. If you are not writing an editor, you can best ignore this function.</td></tr>
</table>
<br>
<table class=doc width=100% cellspacing=3 id=KthuraError>
<tr><td class=doctop colspan=2>Global KthuraError(ErrMessage$)</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>This function is called whenever an error occurs within Kthura. If you want you can replace this function in order to create your own error routines for Kthura.</td></tr>
</table>
<br>
<table class=doc width=100% cellspacing=3 id=KthuraWarning>
<tr><td class=doctop colspan=2>Global KthuraWarning(WarnMessage$)</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>This function is called whenever Kthrura sends out a warning. If you want you can replace this function in order to create your own warning routines for Kthura.</td></tr>
</table>
<br>
<h2
 id=functionsdet>Functions
</h2>
<table class=doc width=100% cellspacing=3 id=LoadKthura>
<tr><td class=doctop colspan=2>Function LoadKthura:TKthura(url:Object,prefix$="",AltTextJCR:TJCRDir=Null)</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Load Kthura map.</td></tr>
<tr><td class=docleft width=1%>Information</td><td class=docright>File can be either a file name or a TJCRDir map. The prefix is mostly used for entering pathname within the JCR file in which the the Kthura map has been stored. AltTextJCR can be used if you used a separate JCR file or a regular directory to store your textures. Personally I only placed it in to make this routine work well with the editor, since if your maps and textures are in the same JCR file, you should just ignore this parameter!</td></tr>
</table>
<br>
<h2
 id=typesdet>Types
</h2>
<table class=doc width=100% cellspacing=3 id=TKthura>
<tr><td class=doctop colspan=2>Type TKthura</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>This type is used to store a level set up in Kthura.</td></tr>
</table>
<table class=doc width=90% align=center><tr ><th class=doctop colspan=2 align=left><a name=TKthura_methods></a>Methods Summary</th></tr>
<tr><td class=docleft width=1%><a href=#Block>Block</a></td><td class=docright>
False if a pixel is free, True if a pixel is blocked.
</td></tr>
<tr><td class=docleft width=1%><a href=#BuildBlockmap>BuildBlockmap</a></td><td class=docright>
Builds the blockmap.
</td></tr>
<tr><td class=docleft width=1%><a href=#CoordInObject>CoordInObject</a></td><td class=docright>
Is a coordinate within an object or not.
</td></tr>
<tr><td class=docleft width=1%><a href=#CoordInObjectFromTag>CoordInObjectFromTag</a></td><td class=docright>
Retrieve an object from a tag and performs a check if the coordinate is within the object or not.
</td></tr>
<tr><td class=docleft width=1%><a href=#CountMovingActors>CountMovingActors</a></td><td class=docright>
Counts all actors currently moving. (Actors set on the move with both WalkTo and MoveTo will be counted).
</td></tr>
<tr><td class=docleft width=1%><a href=#CountWalkingActors>CountWalkingActors</a></td><td class=docright>
Counts all actors currently walking (basically what the name implies).
</td></tr>
<tr><td class=docleft width=1%><a href=#CreateActor>CreateActor</a></td><td class=docright>
Creates an actor on the given coordinates and returns it.
</td></tr>
<tr><td class=docleft width=1%><a href=#GetObjectByID>GetObjectByID</a></td><td class=docright>
Gets an object through searching by ID number.
</td></tr>
<tr><td class=docleft width=1%><a href=#GetObjectByTag>GetObjectByTag</a></td><td class=docright>
Gets an object by searching for a tag!
</td></tr>
<tr><td class=docleft width=1%><a href=#GiveTag>GiveTag</a></td><td class=docright>
Sets a new tag.
</td></tr>
<tr><td class=docleft width=1%><a href=#HideLabel>HideLabel</a></td><td class=docright>
Shows all objects containing a certain label.
</td></tr>
<tr><td class=docleft width=1%><a href=#RemapDrawMap>RemapDrawMap</a></td><td class=docright>
This function recalculates the entire drawmap.
</td></tr>
<tr><td class=docleft width=1%><a href=#RemapLabelMap>RemapLabelMap</a></td><td class=docright>
This function recalculates the entire label map and foreign map.
</td></tr>
<tr><td class=docleft width=1%><a href=#RemapTagMap>RemapTagMap</a></td><td class=docright>
This function recalculates the entire tagmap.
</td></tr>
<tr><td class=docleft width=1%><a href=#RemoveActors>RemoveActors</a></td><td class=docright>
Remove all actors from a Kthura map.
</td></tr>
<tr><td class=docleft width=1%><a href=#ReTag>ReTag</a></td><td class=docright>
Finds an object with a certain tag and gives it a new tag.
</td></tr>
<tr><td class=docleft width=1%><a href=#ShowLabel>ShowLabel</a></td><td class=docright>
Shows all objects containing a certain label.
</td></tr>
<tr><td class=docleft width=1%><a href=#ShowOnlyLabel>ShowOnlyLabel</a></td><td class=docright>
Show all objects only containing the labels.
</td></tr>
<tr><td class=docleft width=1%><a href=#SpawnActor>SpawnActor</a></td><td class=docright>
Creates an actor by using an 'entrace' or 'exit' spot.
</td></tr>
<tr><td class=docleft width=1%><a href=#TotalRemap>TotalRemap</a></td><td class=docright>
Remaps everything.
</td></tr>
</table>
<table class=doc width=100% cellspacing=3 id=Block>
<tr><td class=doctop colspan=2>Method Block(X,Y)</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>False if a pixel is free, True if a pixel is blocked.</td></tr>
<tr><td class=docleft width=1%>Information</td><td class=docright>Please note that this method only works well, if the blockmap is built (or loaded from a kthuramap). This one works it out from the pixel, not the BlockMap Grid, however, the smaller the grid, the more precize this feature becomes (although it's more memory eating, so think well where you put your emphasis).</td></tr>
</table>
<table class=doc width=100% cellspacing=3 id=BuildBlockmap>
<tr><td class=doctop colspan=2>Method BuildBlockmap()</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Builds the blockmap.</td></tr>
<tr><td class=docleft width=1%>Information</td><td class=docright>This can happen automatically when placing, removing, moving or reshaping any object. Please note that overusing this will slow down the performance. Most functions calling this can be instructed not to do so and so you can save it for last if you do multiple modifications.<p>Please note that objects with coordinates lower than 0 will have the coordinates set to 0 in the blockmap calculation. There is no official limit in the height of coordinates, but please keep in mind that going overboard in that, can be very demanding on your memory.<p>The blockmap builds the map on a 32x32 pixel grid by default. You can set the BlockmapGridW and BlockMapGridH variables (which are field vars of your tKthura map) to adjust this, please keep in mind, the lower the number, the more memory this will take up, so handle with care.</td></tr>
</table>
<table class=doc width=100% cellspacing=3 id=CoordInObject>
<tr><td class=doctop colspan=2>Method CoordInObject(KObject:TKthuraObject,x,y)</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Is a coordinate within an object or not.</td></tr>
<tr><td class=docleft width=1%>Information</td><td class=docright>This function will check based on the object type if a coordinate is within an object or not. <p>Currently supported objects: Zone, TiledArea, Obstacle.
returns: True if this is the case, and False if not. (duh)<p>Unsupported object types will always return False.</td></tr>
</table>
<table class=doc width=100% cellspacing=3 id=CoordInObjectFromTag>
<tr><td class=doctop colspan=2>Method CoordInObjectFromTag(Tag$,x,y)</td></tr>
<tr><td class=docleft width=1%>Returns</td><td class=docright>True if this is the case, and False if not. (duh)</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Retrieve an object from a tag and performs a check if the coordinate is within the object or not.</td></tr>
</table>
<table class=doc width=100% cellspacing=3 id=CountMovingActors>
<tr><td class=doctop colspan=2>Method CountMovingActors()</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Counts all actors currently moving. (Actors set on the move with both WalkTo and MoveTo will be counted).</td></tr>
</table>
<table class=doc width=100% cellspacing=3 id=CountWalkingActors>
<tr><td class=doctop colspan=2>Method CountWalkingActors()</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Counts all actors currently walking (basically what the name implies).</td></tr>
</table>
<table class=doc width=100% cellspacing=3 id=CreateActor>
<tr><td class=doctop colspan=2>Method CreateActor:TKthuraActor(X,Y,Pics$,Tag$,SorB=1,Update=True)</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Creates an actor on the given coordinates and returns it.</td></tr>
<tr><td class=docleft width=1%>Information</td><td class=docright>SorB means 'single' or 'bundle'. 0 = single and 1 = bundle. A single picture can be animated, but it is only one picture. A bundle is read from an entire JCR6 directory and the files are stored stripped from the full path name and picture extention (case insensitive) in a library tied to this picture. I need to note that if the bundle contains MyPicture.png and MYPICTURE.JPG that they will both stored on the same spot and that the last one read (due to the alphabetic nature of JCR6 that will be MyPicture.png) will be kept. Keep this very important part in mind! (Also note that the Pic Bundle reader does not find the files recursively)</td></tr>
</table>
<table class=doc width=100% cellspacing=3 id=GetObjectByID>
<tr><td class=doctop colspan=2>Method GetObjectByID:TKthuraObject(ID)</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Gets an object through searching by ID number.</td></tr>
<tr><td class=docleft width=1%>Information</td><td class=docright>Returns the object if it exists, otherwise it returns 0.</td></tr>
</table>
<table class=doc width=100% cellspacing=3 id=GetObjectByTag>
<tr><td class=doctop colspan=2>Method GetObjectByTag:TKthuraObject(Tag$)</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Gets an object by searching for a tag!</td></tr>
</table>
<table class=doc width=100% cellspacing=3 id=GiveTag>
<tr><td class=doctop colspan=2>Method GiveTag(O:TKthuraObject,tag$)</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Sets a new tag.</td></tr>
<tr><td class=docleft width=1%>Information</td><td class=docright>Each tag must be unique. Giving this object a tag which already exists will cause an error.<p>You don't need to remap the tags, as this routine will automatically update the tagmap and in a faster manner than <a href=#RemapTagMap>RemapTagMap</a> does too.<p>Oh yeah, tags are case sensitive!</td></tr>
</table>
<table class=doc width=100% cellspacing=3 id=HideLabel>
<tr><td class=doctop colspan=2>Method HideLabel(labels$)</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Shows all objects containing a certain label.</td></tr>
<tr><td class=docleft width=1%>Information</td><td class=docright>All labels should be in one string separated by commas.</td></tr>
</table>
<table class=doc width=100% cellspacing=3 id=RemapDrawMap>
<tr><td class=doctop colspan=2>Method RemapDrawMap()</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>This function recalculates the entire drawmap.</td></tr>
<tr><td class=docleft width=1%>Information</td><td class=docright>This function can when you use it a lot slow down your program performance so it should only be used when you need to.<p>When a new object is created this function is called automatically. Because of that it can sometimes be a faster solution to have all objects created from the start but have them outside of the screen and move them in screen, in stead of creating objects in-game real-time.</td></tr>
</table>
<table class=doc width=100% cellspacing=3 id=RemapLabelMap>
<tr><td class=doctop colspan=2>Method RemapLabelMap()</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>This function recalculates the entire label map and foreign map.</td></tr>
<tr><td class=docleft width=1%>Information</td><td class=docright>This function can when you use it a lot slow down your program performance so it should only be used when you need to.<p>When a new object is created this function is called automatically. Because of that it can sometimes be a faster solution to have all objects created from the start but have them outside of the screen and move them in screen, in stead of creating objects in-game real-time.</td></tr>
</table>
<table class=doc width=100% cellspacing=3 id=RemapTagMap>
<tr><td class=doctop colspan=2>Method RemapTagMap()</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>This function recalculates the entire tagmap.</td></tr>
<tr><td class=docleft width=1%>Information</td><td class=docright>This function can when you use it a lot slow down your program performance so it should only be used when you need to.<p>When a new object is created this function is called automatically. Because of that it can sometimes be a faster solution to have all objects created from the start but have them outside of the screen and move them in screen, in stead of creating objects in-game real-time.</td></tr>
</table>
<table class=doc width=100% cellspacing=3 id=RemoveActors>
<tr><td class=doctop colspan=2>Method RemoveActors()</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Remove all actors from a Kthura map.</td></tr>
</table>
<table class=doc width=100% cellspacing=3 id=ReTag>
<tr><td class=doctop colspan=2>Method ReTag(OldTag$,NewTag$)</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Finds an object with a certain tag and gives it a new tag.</td></tr>
</table>
<table class=doc width=100% cellspacing=3 id=ShowLabel>
<tr><td class=doctop colspan=2>Method ShowLabel(labels$)</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Shows all objects containing a certain label.</td></tr>
<tr><td class=docleft width=1%>Information</td><td class=docright>All labels should be in one string separated by commas.</td></tr>
</table>
<table class=doc width=100% cellspacing=3 id=ShowOnlyLabel>
<tr><td class=doctop colspan=2>Method ShowOnlyLabel(Labels$)</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Show all objects only containing the labels.</td></tr>
</table>
<table class=doc width=100% cellspacing=3 id=SpawnActor>
<tr><td class=doctop colspan=2>Method SpawnActor:TKthuraActor(Spot$,Pics$,Tag$,SorB=1,Update=True)</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Creates an actor by using an 'entrace' or 'exit' spot.</td></tr>
<tr><td class=docleft width=1%>Information</td><td class=docright>In basic speaking, ANY object can be used as a start spot, as long as it has a tag (as that what we respond to here). Though it's recommended to ONLY use entrance/exit points as you may turn things into chaos if you don't. (Please note "Spot" refers to the tag of the object we should spawn upon. "Tag" refers to the tag of the actor itself).<p>The advantage of this routine that it also copies the dominance setting and some other data tied to the entrance point.</td></tr>
</table>
<table class=doc width=100% cellspacing=3 id=TotalRemap>
<tr><td class=doctop colspan=2>Method TotalRemap()</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Remaps everything.</td></tr>
<tr><td class=docleft width=1%>Information</td><td class=docright>Using this too much may slow down your game, so only use this when you really need to.</td></tr>
</table>
<br>
<table class=doc width=100% cellspacing=3 id=TKthuraActor>
<tr><td class=doctop colspan=2>Type TKthuraActor Extends TKthuraObject</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>This type is used for actors in a Kthura Map. It's an extended TKthuraObject as actors have some additional data which you won't need in the other objects.</td></tr>
</table>
<table class=doc width=90% align=center><tr ><th class=doctop colspan=2 align=left><a name=TKthuraActor_methods></a>Methods Summary</th></tr>
<tr><td class=docleft width=1%><a href=#IncFrame>IncFrame</a></td><td class=docright>
Increases frame of the current picture.
</td></tr>
<tr><td class=docleft width=1%><a href=#MoveTo>MoveTo</a></td><td class=docright>
Makes the character walk to a target position.
</td></tr>
<tr><td class=docleft width=1%><a href=#WalkTo>WalkTo</a></td><td class=docright>
Makes an actor walk to a target position.
</td></tr>
</table>
<table class=doc width=100% cellspacing=3 id=IncFrame>
<tr><td class=doctop colspan=2>Method IncFrame(IncValue=1)</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Increases frame of the current picture.</td></tr>
</table>
<table class=doc width=100% cellspacing=3 id=MoveTo>
<tr><td class=doctop colspan=2>Method MoveTo(TX,TY,TIngoreBlocks=False)</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Makes the character walk to a target position.</td></tr>
<tr><td class=docleft width=1%>Information</td><td class=docright>Contrary to WalkTo, MoveTo uses a rather primitive way to find the way and the character will not be able to find the way when there are obstacles in the way. The character will simply stop moving upon touching those. An advantage of this routine is that it's able to be more precize than WalkTo. Please note the routine should not be used when the character is already walking with WalkTo, or you may get some very odd behavior.</td></tr>
</table>
<table class=doc width=100% cellspacing=3 id=WalkTo>
<tr><td class=doctop colspan=2>Method WalkTo(TX,TY)</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Makes an actor walk to a target position.</td></tr>
<tr><td class=docleft width=1%>Information</td><td class=docright>If the target coordinates are impossible to reach, your request will simply be ignored.</td></tr>
</table>
<br>
<table class=doc width=100% cellspacing=3 id=TKthuraObject>
<tr><td class=doctop colspan=2>Type TKthuraObject</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>This type contains data of an object within a Kthura map.</td></tr>
</table>
<table class=doc width=90% align=center><tr ><th class=doctop colspan=2 align=left><a name=TKthuraObject_methods></a>Methods Summary</th></tr>
<tr><td class=docleft width=1%><a href=#Move>Move</a></td><td class=docright>
Moves an object.
</td></tr>
<tr><td class=docleft width=1%><a href=#Reform>Reform</a></td><td class=docright>
Moves and reshapes.
</td></tr>
<tr><td class=docleft width=1%><a href=#ReShape>ReShape</a></td><td class=docright>
Set the a new size for the object.
</td></tr>
</table>
<table class=doc width=100% cellspacing=3 id=Move>
<tr><td class=doctop colspan=2>Method Move(nx,ny,updateblockmap=True)</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Moves an object.</td></tr>
<tr><td class=docleft width=1%>Information</td><td class=docright>You won't have to remap the drawmaps as that will happen automatically, however rebuilding the blockmap can be in order, which will happen here. If you want to make multiple movements you can turn it off, but then it will have to happen after the last change you make or the way the player can or cannot walk to will act very strangely.</td></tr>
</table>
<table class=doc width=100% cellspacing=3 id=Reform>
<tr><td class=doctop colspan=2>Method Reform(nx,ny,nw,nh,UpdateBlockMap=True)</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Moves and reshapes.</td></tr>
</table>
<table class=doc width=100% cellspacing=3 id=ReShape>
<tr><td class=doctop colspan=2>Method ReShape(nw,nh,updateblockmap=True)</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Set the a new size for the object.</td></tr>
</table>
<br>
<h2 id=modinfo>Module Information</h2>
<table width=100%>
<tr><th width=1%>Author</th><td>Jeroen P. Broks</td></tr>
<tr><th width=1%>Copyright</th><td>(c) 2015-2015 Jeroen P. Broks</td></tr>
<tr><th width=1%>License</th><td>Mozilla Public License 2.0</td></tr>
<tr><th width=1%>Notice</th><td>The character 'Kthura' which this system is named after and the world and stories she belongs to are property of Jeroen P. Broks and may only be used with his permission. The name 'Kthura' may freely be used in any system related to the Kthura engine as long as it clearly refers to this system and not to the actual character</td></tr>
<tr><th width=1%>Version</th><td>15.05.27</td></tr>
<tr><th width=1%>Quote</th><td>How appropriate! You fight like a cow</td></tr>
</body></html>
