<html><head><title> reference</title>
<link rel=stylesheet Type=text/css href='../../../../doc/bmxstyle.css'>
</head><body>
<table width=100% cellspacing=0><tr align=center><td class=small>&nbsp;</td>
<td class=small width=1%><b>GALE.Main:</b></td>
<td class=small width=1%><a href=#globals class=small>Globals</a></td>
<td class=small width=1%><a href=#functions class=small>Functions</a></td>
<td class=small width=1%><a href=#types class=small>Types</a></td>
<td class=small width=1%><a href=#modinfo class=small>Modinfo</a></td>
<td class=small width=1%><a href='../../../../mod/gale.mod/main.mod/main.bmx' class=small>Source</a></td>
<td class=small>&nbsp;</td></tr></table>
<h1></h1>
<img src='GALE.png' alt='GALE' style='float:left'><h1>General Allpurpose Lua Engine</h1>
<p>
The GALE project was started up, simply because the support for Lua in BlitzMax was too limited to my liking, plus I knew that a lot of 'libraries' I would code for Lua in BlitzMax would be present in lots of my projects, so I just needed some quick routines to get Lua to work as I want it to. and so the GALE project came more or less to life.
GALE was never meant to be a serious project, but as I code in the open source, I only felt that it would be handy to release the GALE project separately from my other projects, and hey, if you can find use for GALE, be my guest.
<p>
GALE is supposed to load lua scripts from JCR files (created with JCR6). GALE contains a preprosessor in order to give more functionality to Lua, namely compiler conditional compiler directives, a "Select-Case" manager and a few other things.
<p>
As this is only a quick project, I do realize that the documentation may be a bit poor, this may be worked out a lot better in future versions.
<p>
Have fun with "GALE".
<p>
<p>
NOTICE<br>If you have programs of mine built with older GALE versions, they may not work any more. You can fix this by adding 'Import GALE.M2D' to the list of modules those programs have to import. If those programs are updated in the future this fix will be among it ;)
<p>
<p>
Below is a quick command referrence on the commands that GALE can add to Lua. 
Please note that the .bmx file noted here must be imported, however you should not do that directly.
For example GALE_Image.bmx should be imported as GALE.Image and so it goes for all files except for GALE.bmx which should be imported as GALE.Main.<br>
Any questions?
<p>
<a href='Gale_Doc.html'>Under this link you'll find the COMPLETE command referrence Lua can use if ALL GALE modules are imported in your program</a>
<!--
<center><iframe width=60% height=400 src='Gale_Doc.html'><span style='color:red'>IFrames not suppored, which is required for the command referrence</span></iframe></center>
-->
<p>
One important note. GALE cannot function correctly with JCR6 files where the filenames are case-sensitive. In other words the JCR6 file must be configured to be case IN-Sensitive. (Techno-Babble: When a case-senstive JCR file is patched into a case-insensitive main file, the main file's settings are dominant!)
<h2><a name=globals></a>Globals Summary</h2><table class=doc width=100%><tr><td colspan=2>
<a href=#GALEJCRCRASH>GALEJCRCRASH</a>
, 
<a href=#LuaErrorCrash>LuaErrorCrash</a>
, 
<a href=#LuaErrorRewindow>LuaErrorRewindow</a>
, 
<a href=#LuaScriptDump>LuaScriptDump</a>
</td></tr>
</table>
<h2><a name=functions></a>Functions Summary</h2><table class=doc width=100%>
<tr><td class=docleft width=1%><a href=#GALE_Error>GALE_Error</a></td><td class=docright>
This function will crash out with an error on GALE style.
</td></tr>
<tr><td class=docleft width=1%><a href=#GALE_LoadScript>GALE_LoadScript</a></td><td class=docright>
Loads a script preprocesses it and tries to compile it.
</td></tr>
<tr><td class=docleft width=1%><a href=#GALE_Register>GALE_Register</a></td><td class=docright>
BlitzMax' Lua RegisterObject.
</td></tr>
<tr><td class=docleft width=1%><a href=#GALE_ScriptHasFunction>GALE_ScriptHasFunction</a></td><td class=docright>
True if a function exists within the script (when the script is Null then it will always return false)
</td></tr>
<tr><td class=docleft width=1%><a href=#IDirective>IDirective</a></td><td class=docright>
Add a directive from the engine.
</td></tr>
</table>
<h2><a name=types></a>Types Summary</h2><table class=doc width=100%>
<tr><td class=docleft width=1%><a href=#TLua>TLua</a></td><td class=docright>
Contains the data about a loaded Lua Script.
</td></tr>
</table>
<h2
 id=globalsdet>Globals
</h2>
<table class=doc width=100% cellspacing=3 id=GALEJCRCRASH>
<tr><td class=doctop colspan=2>Global GALEJCRCRASH</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>When set, GALE will crash out the program when a JCR6 error occurs during running a program with GALE imported.</td></tr>
<tr><td class=docleft width=1%>Information</td><td class=docright>Important note, the error does not have to be caused by GALE. Any failed JCR call will cause this to happen when GALE is imported.</td></tr>
</table>
<br>
<table class=doc width=100% cellspacing=3 id=LuaErrorCrash>
<tr><td class=doctop colspan=2>Global LuaErrorCrash</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>If set true the program will end when a Lua Error occurs.</td></tr>
</table>
<br>
<table class=doc width=100% cellspacing=3 id=LuaErrorRewindow>
<tr><td class=doctop colspan=2>Global LuaErrorRewindow</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>When set to true, the program will end the current graphics mode and resume in a windowed graphics mode.</td></tr>
<tr><td class=docleft width=1%>Information</td><td class=docright>I placed this one in to ensure compatibility with MiniB3D (otherwise you'd just get a black screen when an error occurs). Please note that when you don't make the game crash out on errors that you have to reinitize the Graphics3D mode or minib3d will probably not work properly.</td></tr>
</table>
<br>
<table class=doc width=100% cellspacing=3 id=LuaScriptDump>
<tr><td class=doctop colspan=2>Global LuaScriptDump</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>When set the script loader will after all preprocessing is done, dump the generated code to STDOUT. Recommended only to use when some serious issues arise.</td></tr>
</table>
<br>
<h2
 id=functionsdet>Functions
</h2>
<table class=doc width=100% cellspacing=3 id=GALE_Error>
<tr><td class=doctop colspan=2>Function GALE_Error(Message$,R$[]=Null)</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>This function will crash out with an error on GALE style.</td></tr>
</table>
<br>
<table class=doc width=100% cellspacing=3 id=GALE_LoadScript>
<tr><td class=doctop colspan=2>Function GALE_LoadScript:TLua(MainList:Object,Entry$,SavedVariables$="",priorscript$="")</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Loads a script preprocesses it and tries to compile it.</td></tr>
</table>
<br>
<table class=doc width=100% cellspacing=3 id=GALE_Register>
<tr><td class=doctop colspan=2>Function GALE_Register(obj:Object,Name$)</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>BlitzMax' Lua RegisterObject.</td></tr>
<tr><td class=docleft width=1%>Information</td><td class=docright>As GALE uses a modified version of MaxLua, which has been built into the core of GALE, this function has been added, and I recommend you use it all the time when using GALE to prevent any sort of conflicts!</td></tr>
</table>
<br>
<table class=doc width=100% cellspacing=3 id=GALE_ScriptHasFunction>
<tr><td class=doctop colspan=2>Function GALE_ScriptHasFunction(Script:TLua,Func$)</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>True if a function exists within the script (when the script is Null then it will always return false)</td></tr>
</table>
<br>
<table class=doc width=100% cellspacing=3 id=IDirective>
<tr><td class=doctop colspan=2>Function IDirective(ID$,add=True)</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Add a directive from the engine.</td></tr>
<tr><td class=docleft width=1%>Information</td><td class=docright>When you start the directive name with a * the setting cannot be changed by the Lua Scripts, only by your game engine! ($ can also be used, but may cause conflicts if I add extra directives to GALE in future versions and I accidentally chose the same name as you did).</td></tr>
</table>
<br>
<h2
 id=typesdet>Types
</h2>
<table class=doc width=100% cellspacing=3 id=TLua>
<tr><td class=doctop colspan=2>Type TLua</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Contains the data about a loaded Lua Script.</td></tr>
</table>
<table class=doc width=90% align=center><tr ><th class=doctop colspan=2 align=left><a name=TLua_methods></a>Methods Summary</th></tr>
<tr><td class=docleft width=1%><a href=#Run>Run</a></td><td class=docright>
Runs a script with the called function with its arguments.
</td></tr>
<tr><td class=docleft width=1%><a href=#Save>Save</a></td><td class=docright>
Returns a string containing all saved variables scripted out in a Lua string.
</td></tr>
</table>
<table class=doc width=100% cellspacing=3 id=Run>
<tr><td class=doctop colspan=2>Method Run(RFunction$,args$[])</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Runs a script with the called function with its arguments.</td></tr>
</table>
<table class=doc width=100% cellspacing=3 id=Save>
<tr><td class=doctop colspan=2>Method Save$(Tpe$="")</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Returns a string containing all saved variables scripted out in a Lua string.</td></tr>
<tr><td class=docleft width=1%>Information</td><td class=docright>You can save this string into a .lua file in order to include it when a script is being reloaded. The 'tpe' you can give up is the type given up in the .lsv file that is used to determine which variables to save. When you don't give it up the system will use 'VAR'.</td></tr>
</table>
<br>
<h2 id=modinfo>Module Information</h2>
<table width=100%>
<tr><th width=1%>Name</th><td>main.mod</td></tr>
<tr><th width=1%>Creator</th><td>Tricky (Jeroen P. Broks)</td></tr>
<tr><th width=1%>Copyright</th><td>Jeroen P. Broks</td></tr>
<tr><th width=1%>License</th><td>Mozilla Public License 2.0</td></tr>
<tr><th width=1%>Version</th><td>15.07</td></tr>
<tr><th width=1%>Last update</th><td>Tue 28 July 2015; 00:19:48</td></tr>
<tr><th width=1%>Module History</th><td>Please check the file GALE.bmx for more detailed information on that!</td></tr>
</body></html>
